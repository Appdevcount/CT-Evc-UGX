import React, { useRef } from "react";
import { NavLink } from "react-router-dom";
import { AuthProvider } from "../../auth/authProvider";
import { useLocalStorage } from "../../utils/useLocalStorage";

function IdleLogout() {
  const [, setIdleTimeoutTriggered] = useLocalStorage<Boolean>('idleTimeoutTriggered', false);

  const loginFn = useRef(() => {});
    loginFn.current = () => {
      setIdleTimeoutTriggered(false);
      AuthProvider.Application.loginRedirect(AuthProvider.loginRequest);
  };

  return (
    <>
      <div className="container py-5 h-100">
        <div className="row d-flex justify-content-center align-items-center h-100">
          <div className="col-12 col-md-8 col-lg-6 col-xl-5">
            <div className="card card-alt">
              <div className="card-header bg-transparent border-bottom-0">
                <div className="logo w-50 h-50 py-5 m-auto">
                  <svg
                    viewBox="0 0 375 278"
                    xmlns="http://www.w3.org/2000/svg"
                    xmlnsXlink="http://www.w3.org/1999/xlink"
                  >
                    <defs>
                      <path id="a" d="M0 0h375.08v277.7H0z" />
                    </defs>
                    <clipPath id="b">
                      <use overflow="visible" xlinkHref="#a" />
                    </clipPath>
                    <path
                      d="M129.17 232.91c-4.001-4.229-3.817-10.899.41-14.9 4.228-4.001 10.899-3.817 14.9.41 3.986 4.231 3.798 10.89-.42 14.89a10.486 10.486 0 01-7.24 2.891c-2.894 0-5.66-1.19-7.65-3.291"
                      clip-path="url(#b)"
                      fill="#CFD7DF"
                    />
                    <path
                      d="M171 263.54c-5.231-2.54-7.414-8.84-4.874-14.071l.004-.009c2.545-5.23 8.847-7.41 14.08-4.87 5.232 2.54 7.414 8.84 4.874 14.071l-.004.009a10.541 10.541 0 01-9.48 5.94 10.367 10.367 0 01-4.6-1.07"
                      clip-path="url(#b)"
                      fill="#C0CBD5"
                    />
                    <path
                      d="M220.8 277.65c-5.784-.599-9.996-5.763-9.42-11.55.6-5.784 5.763-9.996 11.55-9.42 5.786.583 10.005 5.746 9.422 11.531l-.002.019a10.53 10.53 0 01-10.47 9.471 9.749 9.749 0 01-1.08-.051"
                      clip-path="url(#b)"
                      fill="#B3C0CD"
                    />
                    <path
                      d="M259.61 266.16c-1.469-5.627 1.902-11.38 7.53-12.848a.126.126 0 01.01-.003c5.62-1.474 11.37 1.888 12.844 7.508a.658.658 0 00.006.022c1.479 5.619-1.877 11.372-7.496 12.852l-.034.009a10.55 10.55 0 01-12.86-7.54M304.78 249.3c-3.372-4.742-2.267-11.319 2.47-14.7 4.745-3.369 11.323-2.26 14.7 2.48 3.371 4.742 2.267 11.319-2.47 14.7a10.52 10.52 0 01-6.101 1.949 10.53 10.53 0 01-8.599-4.429"
                      clip-path="url(#b)"
                      fill="#A4B4C3"
                    />
                    <path
                      d="M340.9 217.38c-4.871-3.173-6.258-9.688-3.101-14.57 3.174-4.876 9.693-6.267 14.579-3.109 4.878 3.173 6.266 9.696 3.102 14.58a10.533 10.533 0 01-8.852 4.81 10.632 10.632 0 01-5.728-1.711M362.54 174.31c-5.691-1.095-9.428-6.583-8.36-12.279a.737.737 0 010-.199c1.086-5.716 6.593-9.474 12.311-8.401 5.72 1.08 9.481 6.593 8.401 12.313l-.002.008a.834.834 0 000 .1.706.706 0 010 .13 10.52 10.52 0 01-10.34 8.561 10.78 10.78 0 01-2.01-.233"
                      clip-path="url(#b)"
                      fill="#859AAE"
                    />
                    <path
                      d="M354 117.79c-1.148-5.704 2.538-11.261 8.24-12.42 5.703-1.142 11.255 2.549 12.41 8.25 1.153 5.694-2.526 11.246-8.221 12.4l-.05.01c-.694.138-1.401.209-2.11.21A10.53 10.53 0 01354 117.79M337.22 77.031c-3.168-4.87-1.788-11.387 3.082-14.555l.008-.005c4.865-3.176 11.384-1.806 14.561 3.059l.02.031c3.16 4.879 1.778 11.394-3.09 14.57a10.46 10.46 0 01-5.729 1.71 10.53 10.53 0 01-8.852-4.81M306.77 44.871c-4.695-3.421-5.729-10.001-2.309-14.697l.009-.013c3.432-4.703 10.024-5.733 14.728-2.303l.003.003c4.699 3.434 5.726 10.029 2.291 14.728l-.001.002a10.553 10.553 0 01-8.491 4.32 10.484 10.484 0 01-6.23-2.04"
                      clip-path="url(#b)"
                      fill="#768EA4"
                    />
                    <path
                      d="M266.87 25.511c-5.599-1.582-8.857-7.4-7.28-13 1.577-5.603 7.397-8.866 13-7.29 5.599 1.582 8.857 7.4 7.28 13a10.52 10.52 0 01-10.14 7.68 11.012 11.012 0 01-2.86-.39"
                      clip-path="url(#b)"
                    />
                    <path
                      d="M266.87 25.511c-5.599-1.582-8.857-7.4-7.28-13 1.577-5.603 7.397-8.866 13-7.29 5.599 1.582 8.857 7.4 7.28 13a10.52 10.52 0 01-10.14 7.68 11.012 11.012 0 01-2.86-.39"
                      clip-path="url(#b)"
                      fill="#5A7692"
                    />
                    <path
                      d="M211.38 11.381c-.459-5.809 3.877-10.89 9.686-11.349l.015-.001c5.805-.442 10.868 3.905 11.31 9.709v.001c.442 5.797-3.893 10.858-9.689 11.31h-.83a10.54 10.54 0 01-10.492-9.67"
                      clip-path="url(#b)"
                      fill="#3B5D7D"
                    />
                    <path
                      d="M165.84 27.221c-2.458-5.269-.185-11.533 5.08-14 5.269-2.458 11.533-.185 14 5.08 2.452 5.27.181 11.529-5.08 14a10.53 10.53 0 01-4.45 1 10.52 10.52 0 01-9.55-6.08"
                      clip-path="url(#b)"
                      fill="#1F466B"
                    />
                    <path
                      d="M129 58.301c-4.187-4.041-4.321-10.705-.3-14.91 4.034-4.191 10.7-4.325 14.9-.3 4.199 4.029 4.338 10.7.31 14.9a10.498 10.498 0 01-7.61 3.24 10.588 10.588 0 01-7.3-2.93"
                      clip-path="url(#b)"
                      fill="#0D375F"
                    />
                    <path
                      d="M101.66 84.121c-3.349 4.625-2.314 11.09 2.311 14.439l.029.021c4.638 3.351 11.112 2.312 14.47-2.32 3.34-4.644 2.294-11.116-2.34-14.47a10.31 10.31 0 00-7-1.92 10.289 10.289 0 00-7.47 4.25"
                      clip-path="url(#b)"
                      fill="#C99700"
                    />
                    <path
                      d="M16.51 136.87c.17 4 1.77 7.75 7.66 7.75 3.71 0 6-1.771 6.66-4.221h16C45.4 149 37.4 155.48 24.26 155.48 9.1 155.479 0 146.81 0 133.41c0-12.12 8-22.15 23.92-22.15 15.24 0 23.58 9.52 23.58 19.38a34.327 34.327 0 01-.5 6.23H16.51zm0-8H31c0-4.55-2.78-7.33-7.16-7.33s-7.33 2.61-7.33 7.33M63.53 112.44l8.76 24.93 9-24.93h17.19l-19 41.86H65.05l-18.7-41.86zM101.17 112.44h16.51v41.859h-16.51zM178.4 133.7c-1.74 12.17-11.57 22.3-27.82 22.3-18.23 0-29-13.16-29-27.9s10.66-27.9 28.5-27.9c17.09 0 26.69 10.43 28.13 23.21h-16.44c-.91-5-4.69-8.92-11.19-8.92-8.47 0-12.86 6.43-12.86 13.61 0 7.71 4.92 13.61 13.16 13.61 5.82 0 9.9-3.63 10.89-8l16.63-.01zM181.72 133.41c0-12.21 8.76-22.15 24.339-22.15 15.58 0 24.431 9.94 24.431 22.15 0 12.05-8.84 22.07-24.431 22.07-15.588-.001-24.339-10.02-24.339-22.07m32.18 0c0-4.71-3-8.25-7.841-8.25-4.84 0-7.829 3.54-7.829 8.25 0 4.55 3.119 8.26 7.829 8.26s7.841-3.711 7.841-8.26M267.7 127.27a18.56 18.56 0 00-5.641-.76c-6.319 0-11.199 3-11.199 13v14.74h-16.51v-41.81h16.511v6.66a14.187 14.187 0 0112.55-7.5 12.888 12.888 0 014.29.59v15.08zM285.73 136.87c.17 4 1.77 7.75 7.67 7.75 3.699 0 6-1.771 6.649-4.221h16c-1.43 8.601-9.43 15.081-22.569 15.081-15.16 0-24.25-8.67-24.25-22.069 0-12.12 8-22.15 23.92-22.15 15.239 0 23.58 9.52 23.58 19.38a34.42 34.42 0 01-.511 6.23H285.73zm0-8h14.489c0-4.55-2.779-7.33-7.16-7.33-4.379 0-7.329 2.61-7.329 7.33"
                      clip-path="url(#b)"
                      fill="#002855"
                    />
                    <path
                      d="M101.17 167.31h4v14.891a7.74 7.74 0 017.31-4.2c2.87 0 5 1 6.21 2.74 1.14 1.55 1.6 3.38 1.6 6.3v12.24h-4v-11c0-3.83-1.37-6.761-5.25-6.761s-5.89 3.381-5.89 7.08v10.69h-4l.02-31.98zM129.29 189.96c.19 3.521 1.88 6.49 6.44 6.49 3.11 0 4.61-1.511 5.25-3.29h4c-.68 3.51-4.06 6.62-9.27 6.62-7 0-10.36-4.891-10.36-10.87 0-6.25 3.69-10.91 10.22-10.91 5.157-.139 9.449 3.93 9.587 9.087l.003.273c.013.871-.048 1.739-.18 2.6h-15.69zm.05-3h12a5.6 5.6 0 00-5.84-5.93c-3.56 0-6.07 2.17-6.16 5.92v.01zM171.07 178.55v20.73h-3.93v-3.61a8.241 8.241 0 01-7.26 4.11c-6.014-.003-10.888-4.881-10.886-10.896.003-6.011 4.875-10.882 10.886-10.885a8.239 8.239 0 017.26 4.11v-3.561h3.93zm-3.93 10.36c0-4-2.74-7.351-7-7.351s-6.94 3.38-6.94 7.351c0 3.97 2.74 7.31 6.94 7.31s7-3.34 7-7.31M178.19 167.31h4v32h-4zM200.56 199.28a24.514 24.514 0 01-3.56.271c-2.56 0-6.529-.461-6.529-7.261v-10.41h-3.83v-3.329h3.83v-7h3.999v7h5.391v3.329h-5.391v9.54c0 4 1.42 4.52 3.431 4.52a22.81 22.81 0 002.689-.18l-.03 3.52zM204.81 167.31h4v14.891a7.741 7.741 0 017.311-4.2c2.87 0 5 1 6.211 2.74 1.139 1.55 1.589 3.38 1.589 6.3v12.24h-4v-11c0-3.83-1.37-6.761-5.25-6.761s-5.89 3.381-5.89 7.08v10.69h-4l.029-31.98zM245.17 186.08c-.32-2.561-1.87-4.521-5.75-4.521-4.3 0-6.439 3.471-6.439 7.351s2.05 7.31 6.659 7.31c3.431 0 4.94-1.6 5.58-4.07h4c-.64 4.301-3.79 7.631-9.819 7.631-6.761 0-10.36-5.25-10.36-10.87s3.57-10.88 10.29-10.88 9.45 4.06 9.81 8.08l-3.971-.031zM274.89 178.55v20.73H271v-3.61a8.262 8.262 0 01-7.26 4.11c-5.826.052-10.592-4.629-10.645-10.455-.001-.139 0-.277.004-.415 0-5.891 4.29-10.91 10.641-10.91a8.26 8.26 0 017.26 4.11v-3.561h3.89zM271 188.91c0-4-2.74-7.351-7-7.351s-6.94 3.38-6.94 7.351c0 3.97 2.74 7.31 6.94 7.31s7-3.34 7-7.31M294.84 182.2a7.698 7.698 0 00-2-.23c-4.609 0-6.899 3.24-6.899 8.22v9.091h-4v-20.73h4v4.061a7.618 7.618 0 016.899-4.381 5.015 5.015 0 012 .32v3.649zM300.55 189.96c.181 3.521 1.87 6.49 6.44 6.49 3.1 0 4.609-1.511 5.25-3.29h4c-.69 3.51-4.07 6.62-9.271 6.62-7 0-10.37-4.891-10.37-10.87 0-6.25 3.7-10.91 10.23-10.91 5.156-.139 9.448 3.93 9.587 9.087l.003.273c.013.871-.048 1.739-.18 2.6H300.55zm0-3h12a5.59 5.59 0 00-5.839-5.89c-3.51-.04-6.02 2.13-6.12 5.88l-.041.01z"
                      clip-path="url(#b)"
                      fill="#C99700"
                    />
                  </svg>
                </div>
              </div>
              <div className="card-body px-5 pt-0 pb-5">
                <h1 id="sessionExpiredHeading" className="font-size-md">Session expired</h1>
                <p id="sessionExpiredMessage" className="text-secondary font-size-sm">
                  Your session has expired due to inactivity.
                </p>

                <NavLink
                      to=""
                      id="login-btn"
                      activeClassName="active"
                      className=""
                      onClick={loginFn.current}
                    >
                      <span className="mt-3 btn btn-primary font-size-sm">
                        Login
                      </span>
                  </NavLink>
              </div>
            </div>
          </div>
        </div>
      </div>
    </>
  );
}